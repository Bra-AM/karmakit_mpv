<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KarmaKit</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <img src="karmakit-logo.png" class="logo" alt="KarmaKit Logo"/>
  <h1>KarmaKit</h1>
  <p class="tagline">Helping builders get users and validate ideas</p>
  <nav>
    <button onclick="location.href='profile.html'">My Profile</button>
    <button onclick="location.href='submit.html'">Submit Idea</button>
  </nav>
  <p id="greeting"></p>
</header>
<main>
  <div class="card-container" id="card-container"></div>
  <div class="controls">
    <button id="pass-btn">Maybe Later</button>
    <button id="like-btn">Love This!</button>
  </div>
  <button class="submit-cta" onclick="location.href='submit.html'">Submit your idea/app</button>
</main>
<script>
// Initialize data and profile
function init() {
  if(!localStorage.getItem('companies')) {
    localStorage.setItem('companies', JSON.stringify([
      {id:1,name:"Acme Analytics",logo:"https://via.placeholder.com/100",idea:"AI-powered insights for startups",link:"https://play.google.com",likes:0,comments:[]},
      {id:2,name:"Beta Builders",logo:"https://via.placeholder.com/100",idea:"Simple project tracking for devs",link:"https://play.google.com",likes:0,comments:[]}
    ]));
  }
  if(!localStorage.getItem('karma')) localStorage.setItem('karma','0');
  if(!localStorage.getItem('profile')) localStorage.setItem('profile', JSON.stringify({user:'Guest',company:''}));
}
let companies, currentIndex=0;
function load() { companies = JSON.parse(localStorage.getItem('companies')); }
function saveCompanies() { localStorage.setItem('companies', JSON.stringify(companies)); }
function addKarma(points) {
  let k = parseInt(localStorage.getItem('karma'),10); k+=points;
  localStorage.setItem('karma',k.toString());
}
function renderCard() {
  const c = companies[currentIndex];
  document.getElementById('card-container').innerHTML = `
    <h2>${c.name}</h2>
    <img src="${c.logo}" class="card-logo" alt="${c.name}">
    <p><strong>Idea:</strong> ${c.idea}</p>
    <p class="likes">Likes: ${c.likes}</p>
    <p class="comments-count">Comments: ${c.comments.length}</p>
    <div class="card-actions">
      <a href="${c.link}" target="_blank">ðŸ”— Link</a>
      <button id="comment-btn">Comment</button>
    </div>`;
  document.getElementById('comment-btn').onclick = handleComment;
}
function nextCard() { currentIndex = (currentIndex+1)%companies.length; renderCard(); }
function handlePass() { addKarma(1); nextCard(); }
function handleLike() { companies[currentIndex].likes++; saveCompanies(); addKarma(2); nextCard(); }
function handleComment() {
  const txt = prompt("Enter your feedback:");
  if(txt) {
    companies[currentIndex].comments.push(txt);
    saveCompanies();
    addKarma(3);
    alert("Thanks for feedback!");
  }
}
function greet() {
  const profile = JSON.parse(localStorage.getItem('profile'));
  document.getElementById('greeting').textContent = `Hello, ${profile.user}!`;
}
window.addEventListener('DOMContentLoaded', ()=> {
  init(); load(); renderCard(); greet();
  document.getElementById('pass-btn').onclick = handlePass;
  document.getElementById('like-btn').onclick = handleLike;
});
</script>
</body>
</html>